<?xml version="1.0" encoding="utf-8" ?>

<Page
    x:Class="FluentInfo.Pages.RootPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:FluentInfo"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:sys="using:System"
    mc:Ignorable="d">

    <Grid
        AllowDrop="True"
        DragOver="Window_DragOver"
        Drop="Window_Drop">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Grid x:Name="MyMenuBar" Grid.Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <MenuBar Grid.Column="0">
                <MenuBarItem x:Uid="MenuBarItemFile">
                    <MenuFlyoutItem x:Uid="MenuBarItemFileOpen" Click="OpenFilePicker">
                        <MenuFlyoutItem.Icon>
                            <FontIcon Glyph="&#xE838;" />
                        </MenuFlyoutItem.Icon>
                        <MenuFlyoutItem.KeyboardAccelerators>
                            <KeyboardAccelerator Key="O" Modifiers="Control" />
                        </MenuFlyoutItem.KeyboardAccelerators>
                    </MenuFlyoutItem>
                </MenuBarItem>
                <MenuBarItem x:Uid="MenuBarItemEdit">
                    <MenuFlyoutItem
                        x:Uid="MenuBarItemEditCopyText"
                        Click="CopyText"
                        IsEnabled="{x:Bind local:Converters.NotNull(_model.InfoText), Mode=OneWay}">
                        <MenuFlyoutItem.Icon>
                            <FontIcon Glyph="&#xE8C8;" />
                        </MenuFlyoutItem.Icon>
                        <MenuFlyoutItem.KeyboardAccelerators>
                            <KeyboardAccelerator Key="C" Modifiers="Control,Shift" />
                        </MenuFlyoutItem.KeyboardAccelerators>
                    </MenuFlyoutItem>
                </MenuBarItem>
                <MenuBarItem x:Uid="MenuBarItemView">
                    <RadioMenuFlyoutItem
                        x:Uid="MenuBarItemViewPretty"
                        Click="SelectPrettyView"
                        GroupName="ViewSetting"
                        IsChecked="{x:Bind sys:Object.Equals(_settings.SelectedView, local:ViewOption.PrettyView), Mode=OneWay}" />
                    <RadioMenuFlyoutItem
                        x:Uid="MenuBarItemViewText"
                        Click="SelectTextView"
                        GroupName="ViewSetting"
                        IsChecked="{x:Bind sys:Object.Equals(_settings.SelectedView, local:ViewOption.TextView), Mode=OneWay}" />
                    <MenuFlyoutSeparator />
                    <ToggleMenuFlyoutItem
                        x:Uid="MenuBarItemViewWrapText"
                        IsChecked="{x:Bind _settings.TextWrapEnabled, Mode=TwoWay}"
                        IsEnabled="{x:Bind sys:Object.Equals(_settings.SelectedView, local:ViewOption.TextView), Mode=OneWay}" />
                </MenuBarItem>
                <MenuBarItem x:Uid="MenuBarItemHelp">
                    <MenuFlyoutItem x:Uid="MenuBarItemHelpAbout" Click="OpenAboutWindow" />
                </MenuBarItem>
            </MenuBar>
            <MenuBar Grid.Column="1">
                <MenuBarItem x:Name="LanguageMenuBarItem" Title="&#xE774;">
                    <MenuBarItem.Resources>
                        <Style TargetType="Button">
                            <Setter Property="FontFamily" Value="Segoe Fluent Icons, Segoe MDL2 Assets" />
                        </Style>
                    </MenuBarItem.Resources>
                </MenuBarItem>
            </MenuBar>
        </Grid>

        <Frame
            x:Name="NavigationFrame"
            Grid.Row="1"
            Background="Transparent"
            IsNavigationStackEnabled="False" />

        <Popup
            x:Name="PopupInfoBar"
            Grid.Row="0"
            DesiredPlacement="Bottom"
            PlacementTarget="{x:Bind MyMenuBar}"
            VerticalOffset="8">
            <Popup.ChildTransitions>
                <TransitionCollection>
                    <PopupThemeTransition />
                </TransitionCollection>
            </Popup.ChildTransitions>

            <InfoBar
                x:Uid="CopiedAsTextInfoBar"
                IsClosable="False"
                IsOpen="True"
                Severity="Success" />
        </Popup>
    </Grid>
</Page>